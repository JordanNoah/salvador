{"version":3,"file":"listeners.min.js","sources":["../../src/cases/listeners.js"],"sourcesContent":["import $ from \"jquery\";\r\nimport {\r\n    addSection,\r\n    switchSectionEdition,\r\n    saveSection,\r\n    validateFormData\r\n} from \"local_digitalta/cases/main\";\r\nimport {\r\n    showDeleteSectionModal,\r\n    showSaveModal\r\n} from \"local_digitalta/cases/modals\";\r\nimport SELECTORS from \"local_digitalta/cases/selectors\";\r\n\r\n/**\r\n * Set event listeners for the page.\r\n * @return {void}\r\n */\r\nexport default function setEventListeners() {\r\n    const caseid = $(SELECTORS.INPUTS.caseid).val();\r\n\r\n    $(document).on('click', SELECTORS.BUTTONS.addSection, (event) => {\r\n        event.preventDefault();\r\n        addSection(caseid, 'text');\r\n    });\r\n\r\n    $(document).on('click', SELECTORS.BUTTONS.editSection, async function (event) {\r\n        const sectionid = event.currentTarget.dataset.id;\r\n        const sectiontitle = $(`#title_${sectionid}`).text().trim();\r\n        const sectioncontent = $(`#content_${sectionid}`).html();\r\n        await switchSectionEdition(sectionid, true, sectiontitle, sectioncontent);\r\n    });\r\n\r\n    $(document).on('click', SELECTORS.BUTTONS.cancelEditSection, function (event) {\r\n        const sectionid = event.currentTarget.dataset.id;\r\n        const sectiontitle = $(`#title_${sectionid}_original`).val();\r\n        const sectioncontent = $(`#content_${sectionid}_original`).val();\r\n        switchSectionEdition(sectionid, false, sectiontitle, sectioncontent);\r\n    });\r\n\r\n    $(document).on('click', SELECTORS.BUTTONS.saveSection, function (event) {\r\n        const sectionid = event.currentTarget.dataset.id;\r\n        saveSection(caseid, sectionid);\r\n    });\r\n\r\n    $(document).on('click', SELECTORS.BUTTONS.deleteSection, function(event) {\r\n        const sectionid = event.currentTarget.dataset.id;\r\n        showDeleteSectionModal(sectionid);\r\n    });\r\n\r\n    $(document).on('click', SELECTORS.BUTTONS.saveCase, function() {\r\n        if (validateFormData()) {\r\n            showSaveModal();\r\n        }\r\n    });\r\n}\r\n"],"names":["caseid","SELECTORS","INPUTS","val","document","on","BUTTONS","addSection","event","preventDefault","editSection","async","sectionid","currentTarget","dataset","id","sectiontitle","text","trim","sectioncontent","html","cancelEditSection","saveSection","deleteSection","saveCase"],"mappings":"oYAkBUA,QAAS,mBAAEC,mBAAUC,OAAOF,QAAQG,0BAExCC,UAAUC,GAAG,QAASJ,mBAAUK,QAAQC,YAAaC,QACnDA,MAAMC,sCACKT,OAAQ,+BAGrBI,UAAUC,GAAG,QAASJ,mBAAUK,QAAQI,aAAaC,eAAgBH,aAC7DI,UAAYJ,MAAMK,cAAcC,QAAQC,GACxCC,cAAe,oCAAYJ,YAAaK,OAAOC,OAC/CC,gBAAiB,sCAAcP,YAAaQ,aAC5C,8BAAqBR,WAAW,EAAMI,aAAcG,uCAG5Df,UAAUC,GAAG,QAASJ,mBAAUK,QAAQe,mBAAmB,SAAUb,aAC7DI,UAAYJ,MAAMK,cAAcC,QAAQC,GACxCC,cAAe,oCAAYJ,wBAAsBT,MACjDgB,gBAAiB,sCAAcP,wBAAsBT,qCACtCS,WAAW,EAAOI,aAAcG,uCAGvDf,UAAUC,GAAG,QAASJ,mBAAUK,QAAQgB,aAAa,SAAUd,aACvDI,UAAYJ,MAAMK,cAAcC,QAAQC,yBAClCf,OAAQY,kCAGtBR,UAAUC,GAAG,QAASJ,mBAAUK,QAAQiB,eAAe,SAASf,aACxDI,UAAYJ,MAAMK,cAAcC,QAAQC,sCACvBH,kCAGzBR,UAAUC,GAAG,QAASJ,mBAAUK,QAAQkB,UAAU,YAC5C"}