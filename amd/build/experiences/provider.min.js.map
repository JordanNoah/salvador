{"version":3,"file":"provider.min.js","sources":["../../src/experiences/provider.js"],"sourcesContent":["import {exception as displayException} from 'core/notification';\r\nimport Templates from 'core/templates';\r\nimport $ from 'jquery';\r\nimport Ajax from 'core/ajax';\r\nexport const init = () => {\r\n\r\n    let experiences = {experiences: {data: []}};\r\n\r\n    let selectedPage = 1;\r\n\r\n    getExperiences(selectedPage);\r\n    $(document).on(\"click\",\"li.page-item.page-link.page\",function() {\r\n        const clickedPage = $(this).attr('attr-page');\r\n        if (selectedPage !== clickedPage) {\r\n            selectedPage = clickedPage;\r\n            getExperiences(selectedPage);\r\n        }\r\n    });\r\n\r\n    if (experiences.experiences.data.length === 0) {\r\n        Templates.renderForPromise('local_digitalta/_common/empty-view',experiences).then(({html, js}) => {\r\n            Templates.appendNodeContents(\"#list-experience-body\", html, js);\r\n        }).catch((error) => displayException(error));\r\n    }else{\r\n        Templates.renderForPromise('local_digitalta/experiences/dashboard/experience-list', experiences).then(({html, js}) => {\r\n            Templates.appendNodeContents(\"#list-experience-body\", html, js);\r\n        }).catch((error) => displayException(error));\r\n    }\r\n};\r\n\r\nconst getExperiences = async (selectedPage) => {\r\n    let pagination = [{\r\n        page:1,\r\n        selected:false\r\n    },{\r\n        page:2,\r\n        selected:false\r\n    },{\r\n        page:3,\r\n        selected:false\r\n    }];\r\n    pagination = pagination.map(item => {\r\n        return {\r\n            ...item,\r\n            selected: item.page == selectedPage\r\n        };\r\n    });\r\n\r\n    const request = {\r\n        methodname: 'local_digitalta_experiences_get_by_pagination',\r\n        args: {\r\n            'pagenumber':selectedPage,\r\n            'filters':JSON.stringify([])\r\n        }\r\n    };\r\n    const response = await Ajax.call([request])[0];\r\n\r\n    console.log(response);\r\n    Templates.renderForPromise('local_digitalta/_common/pagination', {pages:pagination}).then(({html, js}) => {\r\n        $(\"#digital-pagination\").empty();\r\n        Templates.appendNodeContents(\"#digital-pagination\", html, js);\r\n    }).catch((error) => displayException(error));\r\n};"],"names":["experiences","data","selectedPage","getExperiences","document","on","clickedPage","this","attr","length","renderForPromise","then","_ref","html","js","appendNodeContents","catch","error","_ref2","async","pagination","page","selected","map","item","request","methodname","args","JSON","stringify","response","Ajax","call","console","log","pages","_ref3","empty"],"mappings":"sdAIoB,SAEZA,YAAc,CAACA,YAAa,CAACC,KAAM,KAEnCC,aAAe,EAEnBC,eAAeD,kCACbE,UAAUC,GAAG,QAAQ,+BAA8B,iBAC3CC,aAAc,mBAAEC,MAAMC,KAAK,aAC7BN,eAAiBI,cACjBJ,aAAeI,YACfH,eAAeD,kBAIqB,IAAxCF,YAAYA,YAAYC,KAAKQ,0BACnBC,iBAAiB,qCAAqCV,aAAaW,MAAKC,WAACC,KAACA,KAADC,GAAOA,4BAC5EC,mBAAmB,wBAAyBF,KAAMC,OAC7DE,OAAOC,QAAU,2BAAiBA,4BAE3BP,iBAAiB,wDAAyDV,aAAaW,MAAKO,YAACL,KAACA,KAADC,GAAOA,6BAChGC,mBAAmB,wBAAyBF,KAAMC,OAC7DE,OAAOC,QAAU,2BAAiBA,gBAIvCd,eAAiBgB,MAAAA,mBACfC,WAAa,CAAC,CACdC,KAAK,EACLC,UAAS,GACX,CACED,KAAK,EACLC,UAAS,GACX,CACED,KAAK,EACLC,UAAS,IAEbF,WAAaA,WAAWG,KAAIC,OACjB,IACAA,KACHF,SAAUE,KAAKH,MAAQnB,uBAIzBuB,QAAU,CACZC,WAAY,gDACZC,KAAM,YACWzB,qBACH0B,KAAKC,UAAU,MAG3BC,eAAiBC,cAAKC,KAAK,CAACP,UAAU,GAE5CQ,QAAQC,IAAIJ,6BACFpB,iBAAiB,qCAAsC,CAACyB,MAAMf,aAAaT,MAAKyB,YAACvB,KAACA,KAADC,GAAOA,8BAC5F,uBAAuBuB,2BACftB,mBAAmB,sBAAuBF,KAAMC,OAC3DE,OAAOC,QAAU,2BAAiBA"}