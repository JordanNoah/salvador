{"version":3,"file":"tutoring.min.js","sources":["../../src/experiences/tutoring.js"],"sourcesContent":["import {tutoringTutorsGet, tutoringRequestsAdd, tutoringRequestsRemove} from \"local_digitalta/repositories/tutoring_repository\";\r\nimport Templates from \"core/templates\";\r\nimport Notification from \"core/notification\";\r\nimport SELECTORS from \"local_digitalta/experiences/selectors\";\r\nimport $ from \"jquery\";\r\n\r\nexport const getTutors = async (searchText) => {\r\n  if (!searchText.trim()) {\r\n    $(SELECTORS.SECTIONS.tutoringTutorsGetResults).empty();\r\n    return;\r\n  }\r\n  const experienceid = $(\"#experience-id\").val();\r\n  const tutors = await tutoringTutorsGet({ searchText: searchText, experienceid });\r\n  await addTutorsResults(tutors);\r\n};\r\n\r\n/**\r\n * Add tutors to the results div\r\n * @param {object} tutorsData\r\n * @return {void}\r\n */\r\nexport function addTutorsResults(tutorsData) {\r\n  Templates.render(\"local_digitalta/test/menu_tutor/item-search\", {\r\n    tutors: tutorsData,\r\n  }).then((html) => {\r\n    $(SELECTORS.SECTIONS.tutoringTutorsGetResults).html(html);\r\n    return;\r\n  }).catch((error) => {\r\n    Notification.exception(error);\r\n  });\r\n}\r\n\r\n/**\r\n * Add tutor request\r\n * @param {int} tutorid\r\n * @param {int} experienceid\r\n */\r\nexport function handlerAddTutorRequest(tutorid, experienceid) {\r\n  const args = {tutorid, experienceid};\r\n  tutoringRequestsAdd(args).then(() => {\r\n    getTutors($(SELECTORS.INPUTS.tutorsSearch).val());\r\n    return;\r\n  }).catch((error) => {\r\n    Notification.exception(error);\r\n  });\r\n}\r\n\r\n\r\n/**\r\n * Remove tutor request\r\n * @param {int} tutorid\r\n * @param {int} experienceid\r\n */\r\nexport function handlerRemoveTutorRequest(tutorid, experienceid) {\r\n  const args = {tutorid, experienceid};\r\n  tutoringRequestsRemove(args).then(() => {\r\n    getTutors($(SELECTORS.INPUTS.tutorsSearch).val());\r\n    return;\r\n  }).catch((error) => {\r\n    Notification.exception(error);\r\n  });\r\n}\r\n"],"names":["tutorid","experienceid","args","then","getTutors","SELECTORS","INPUTS","tutorsSearch","val","catch","error","exception","async","searchText","trim","SECTIONS","tutoringTutorsGetResults","empty","tutors","addTutorsResults","tutorsData","render","html"],"mappings":"ghBAqCuCA,QAASC,oBACxCC,KAAO,CAACF,QAAAA,QAASC,aAAAA,2DACHC,MAAMC,MAAK,KAC7BC,WAAU,mBAAEC,mBAAUC,OAAOC,cAAcC,UAE1CC,OAAOC,8BACKC,UAAUD,uDAUeV,QAASC,oBAC3CC,KAAO,CAACF,QAAAA,QAASC,aAAAA,8DACAC,MAAMC,MAAK,KAChCC,WAAU,mBAAEC,mBAAUC,OAAOC,cAAcC,UAE1CC,OAAOC,8BACKC,UAAUD,yMArDdN,UAAYQ,MAAAA,iBAClBC,WAAWC,sCACZT,mBAAUU,SAASC,0BAA0BC,cAG3ChB,cAAe,mBAAE,kBAAkBO,MACnCU,aAAe,0CAAkB,CAAEL,WAAYA,WAAYZ,aAAAA,qBAC3DkB,iBAAiBD,kBAQTC,iBAAiBC,+BACrBC,OAAO,8CAA+C,CAC9DH,OAAQE,aACPjB,MAAMmB,2BACLjB,mBAAUU,SAASC,0BAA0BM,KAAKA,SAEnDb,OAAOC,8BACKC,UAAUD"}